<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Spiral Viewer</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }
        .fullscreen {
            position: absolute;
            top: calc(0.6vw);
            right: calc(1.5vw);
            width: calc(0.5vw);
            height: calc(0.5vw);
            cursor: pointer;
            background: rgba(255, 255, 255, 0.0);
            border: none;
            outline: none;
            font-family: 'Material Icons';
            font-size: calc(1.5vw);
            color: rgba(255,255,255,0.2);
        }
        #controls {
            position: absolute;
            display: none;
            color: rgba(255,255,255,0.5);
        }
		#spacing {
			padding: 20px;
		}
    </style>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body onload="resetSliders()">
    <div id="controls">
        <div><input type="range" id="globalSpeed" min="0" max="5" step="0.01" value="1"><label for="globalSpeed">Global Speed</label></div>
		<div id="spacing"></div>
        <div><input type="range" id="freq" min="0" max="60" step="0.1" value="20"><label for="freq">Base Frequency</label></div>
        <div><input type="range" id="baseSpeed" min="0" max="10" step="0.1" value="5"><label for="baseSpeed">Base Speed</label></div>
        <div><input type="range" id="dirFlips" min="0" max="20" step="1" value="5"><label for="dirFlips">Direction Flips</label></div>
        <div><input type="range" id="lineExp" min="0" max="5" step="0.01" value="3.0"><label for="lineExp">Line Feather</label></div>
		<div id="spacing"></div>
        <div><input type="range" id="noiseAngAmp" min="0" max="5" step="0.01" value="0"><label for="noiseAngAmp">Noise Amplitude (angle)</label></div>
		<div><input type="range" id="noiseRadAmp" min="0" max="0.2" step="0.01" value="0"><label for="noiseRadAmp">Noise Amplitude (radius)</label></div>
        <div><input type="range" id="noiseFreq" min="0" max="20" step="0.1" value="6"><label for="noiseFreq">Noise Frequency</label></div>
        <div><input type="range" id="noiseSpeed" min="-1" max="1" step="0.01" value="-0.2"><label for="noiseSpeed">Noise Rotation Speed</label></div>
		<div id="spacing"></div>
        <div><input type="range" id="pulseAmp" min="0" max="5" step="0.01" value="2"><label for="pulseAmp">Pulse Amplitude</label></div>
        <div><input type="range" id="pulseFreq" min="0" max="20" step="0.1" value="10.6"><label for="pulseFreq">Pulse Frequency</label></div>
        <div><input type="range" id="pulseSpeed" min="0" max="5" step="0.01" value="1.5"><label for="pulseSpeed">Pulse Speed</label></div>
        <div><input type="range" id="pulseExp" min="0" max="5" step="0.01" value="2"><label for="pulseExp">Pulse Exponent</label></div>
		<div id="spacing"></div>
		<div><input type="range" id="hue" min="0" max="1" step="0.01" value="0.7"><label for="hue">Hue</label></div>
		<div><input type="range" id="sat" min="0" max="1" step="0.01" value="0.8"><label for="sat">Saturation</label></div>
		<div><input type="range" id="val" min="0" max="3" step="0.01" value="1.0"><label for="val">Brightness</label></div>
		<div id="spacing"></div>
        <div><input type="range" id="motionBlur" min="0" max="5" step="0.01" value="0.75"><label for="motionBlur">Motion Blur</label></div>
        <div><input type="range" id="superSample" min="1" max="8" step="1" value="2"><label for="superSample">Super Sampling Factor (motion blur / AA quality)</label></div>
    </div>
    <button class="fullscreen" onclick="toggleFullScreen()">fullscreen</button>
    <canvas id="myCanvas"></canvas>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="spiral.js"></script>
    <script>
        function toggleFullScreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }
    </script>
	<script>
        function getUrlParams() {
            let paramString = window.location.search.substr(1),
                params = {},
                paramList = paramString.split("&");

            for (let i = 0; i < paramList.length; i++) {
                let param = paramList[i].split("=");
                params[param[0]] = decodeURIComponent(param[1]);
            }

            return params;
        }

        // Get URL parameters
        const urlParams = getUrlParams();
        
        console.log(urlParams);


		function resetSliders() {
			const sliders = [
				"globalSpeed",
				"freq",
				"baseSpeed",
				"weirdWarp",
				"lineExp",
				"noiseAngAmp",
				"noiseRadAmp",
				"noiseFreq",
				"noiseSpeed",
				"pulseAmp",
				"pulseFreq",
				"pulseSpeed",
				"pulseExp",
				"hue",
				"sat",
				"val",
				"motionBlur",
				"superSample",
			];

			sliders.forEach((sliderId) => {
				if (urlParams.hasOwnProperty(sliderId)) {
					const slider = document.getElementById(sliderId);
					slider.value = urlParams[sliderId];
					const event = new Event("input", { bubbles: true });
					slider.dispatchEvent(event);
				}
			});
		}
		

    </script>
</body>
</html>
