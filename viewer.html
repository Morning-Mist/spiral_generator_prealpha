<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Spiral Viewer</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
			background-color: black;
        }
        canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }
        .fullscreen {
            position: absolute;
            top: calc(0.6vw);
            right: calc(1.5vw);
            width: calc(0.5vw);
            height: calc(0.5vw);
            cursor: pointer;
            background: rgba(255, 255, 255, 0.0);
            border: none;
            outline: none;
            font-family: 'Material Icons';
            font-size: calc(1.5vw);
            color: rgba(255,255,255,0.2);
        }
        #controls {
            position: absolute;
            display: none;
            color: rgba(255,255,255,0.5);
        }
		#spacing {
			padding: 20px;
		}
		
		
		.warning-modal-full-page {
			background-color: rgba(0, 0, 0, 1);
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			display: flex;
			justify-content: center;
			align-items: center;
			z-index: 99999999;
		}
		
		.warning-modal {
			position: fixed;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			background-color: #222;
			color: white;
			padding: 20px;
			max-width: 80%;
			box-sizing: border-box;
			text-align: center;
			z-index: 99999999;
		}

		.warning-modal h1 {
			margin-top: 0;
		}

		.warning-modal p {
			margin-top: 10px;
		}

		.warning-modal button {
			background-color: #ff7f7f; color: black; padding: 10px 20px;
			font-size: 1.2em; border: none; cursor: pointer;
		}
    </style>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body onload="resetSliders()">
	<div class="warning-modal-full-page" id="warningModal-fullPage">
		<div class="warning-modal">
			<h1>Seizure Warning</h1>
			<p>This website contains flashing images that might trigger seizures for people with photosensitive epilepsy.</p>
			<p>If you have a history of epilepsy or seizures, please avoid this site like the plague.</p>
			<button id="continueButton" onclick="hideWarning()">Continue</button>
		</div>
	</div>
	
	
	<div id="controls">
		<div class="zero-centered">
			<input type="range" id="globalSpeed" min="-5" max="5" step="0.01" value="1">
			<button onclick="setToZero('globalSpeed')">Φ</button>
			<label for="globalSpeed">Global Speed</label>
		</div>
		<div><input type="range" id="globalScale" min="0.4" max="5" step="0.01" value="1"><label for="globalScale">Global Scale</label></div>
		<div id="spacing"></div>
		<div><input type="range" id="freq" min="0" max="60" step="0.1" value="20"><label for="freq">Base Frequency</label></div>
		<div class="zero-centered">
			<input type="range" id="baseSpeed" min="-10" max="10" step="0.1" value="5">
			<button onclick="setToZero('baseSpeed')">Φ</button>
			<label for="baseSpeed">Base Speed</label>
		</div>
		<div><input type="range" id="dirFlips" min="0" max="5" step="1" value="5"><label for="dirFlips">Direction Flips</label></div>
		<div class="zero-centered">
			<input type="range" id="concentric" min="-10" max="10" step="0.1" value="0">
			<button onclick="setToZero('concentric')">Φ</button>
			<label for="concentric">Concentric</label>
		</div>
		<div><input type="range" id="lineExp" min="0" max="5" step="0.01" value="3.0"><label for="lineExp">Line Feather</label></div>
		<div id="spacing"></div>
		<div class="zero-centered">
			<input type="range" id="noiseAngAmp" min="-5" max="5" step="0.01" value="0">
			<button onclick="setToZero('noiseAngAmp')">Φ</button>
			<label for="noiseAngAmp">Noise Amplitude (angle)</label>
		</div>
		<div class="zero-centered">
			<input type="range" id="noiseRadAmp" min="-0.1" max="0.1" step="0.001" value="0">
			<button onclick="setToZero('noiseRadAmp')">Φ</button>
			<label for="noiseRadAmp">Noise Amplitude (radius)</label>
		</div>
		<div><input type="range" id="noiseFreq" min="0" max="20" step="0.1" value="6"><label for="noiseFreq">Noise Frequency</label></div>
		<div class="zero-centered">
			<input type="range" id="noiseSpeed" min="-1" max="1" step="0.01" value="-0.2">
			<button onclick="setToZero('noiseSpeed')">Φ</button>
			<label for="noiseSpeed">Noise Rotation Speed</label>
		</div>
		<div id="spacing"></div>
		<div><input type="range" id="pulseAmp" min="0" max="5" step="0.01" value="2"><label for="pulseAmp">Pulse Amplitude</label></div>
		<div><input type="range" id="pulseFreq" min="0" max="20" step="0.1" value="10.6"><label for="pulseFreq">Pulse Frequency</label></div>
		<div class="zero-centered">
			<input type="range" id="pulseSpeed" min="-5" max="5" step="0.01" value="1.5">
			<button onclick="setToZero('pulseSpeed')">Φ</button>
			<label for="pulseSpeed">Pulse Speed</label>
		</div>
		<div><input type="range" id="pulseExp" min="0" max="5" step="0.01" value="2"><label for="pulseExp">Pulse Exponent</label></div>
		<div id="spacing"></div>
		<div><input type="range" id="hue" min="0" max="1" step="0.01" value="0.7"><label for="hue">Hue</label></div>
		<div><input type="range" id="sat" min="0" max="1" step="0.01" value="0.8"><label for="sat">Saturation</label></div>
		<div><input type="range" id="val" min="0" max="3" step="0.01" value="1.0"><label for="val">Brightness</label></div>
		<div id="spacing"></div>
		<div><input type="range" id="motionBlur" min="0" max="5" step="0.01" value="0.75"><label for="motionBlur">Motion Blur</label></div>
		<div><input type="range" id="superSample" min="1" max="8" step="1" value="4"><label for="superSample">Super Sampling Factor (motion blur / AA quality)</label></div>
		<div id="spacing"></div>
		<div><button onclick="randomizeSliders()">Randomize</button></div>
		<div><button id="generateBtn">Generate Visualizer</button></div>
		<div id="spacing"></div>
		<div id="fps" style="padding-left: 10px;"></div>
	</div>
    <button class="fullscreen" onclick="toggleFullScreen()">fullscreen</button>
    <canvas id="myCanvas"></canvas>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="spiral.js"></script>
    <script>
	    function hideWarning() {
			document.getElementById("warningModal-fullPage").style.display = "none";
		}
		
        function toggleFullScreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }
    </script>
	<script>
        function getUrlParams() {
            let paramString = window.location.search.substr(1),
                params = {},
                paramList = paramString.split("&");

            for (let i = 0; i < paramList.length; i++) {
                let param = paramList[i].split("=");
                params[param[0]] = decodeURIComponent(param[1]);
            }

            return params;
        }

        // Get URL parameters
        const urlParams = getUrlParams();
        
        console.log(urlParams);


		function resetSliders() {
			const sliders = [
				"globalSpeed",
				"globalScale",
				"freq",
				"baseSpeed",
				"weirdWarp",
				"lineExp",
				"noiseAngAmp",
				"noiseRadAmp",
				"noiseFreq",
				"noiseSpeed",
				"pulseAmp",
				"pulseFreq",
				"pulseSpeed",
				"pulseExp",
				"hue",
				"sat",
				"val",
				"motionBlur",
				"superSample",
			];

			sliders.forEach((sliderId) => {
				if (urlParams.hasOwnProperty(sliderId)) {
					const slider = document.getElementById(sliderId);
					slider.value = urlParams[sliderId];
					const event = new Event("input", { bubbles: true });
					slider.dispatchEvent(event);
				}
			});
		}
		

    </script>
</body>
</html>
